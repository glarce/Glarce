<!doctype HTML>
<html lang="en">

<head>
  <script src="https://aframe.io/releases/0.6.1/aframe.min.js"></script>
  <script src="https://jeromeetienne.github.io/AR.js/aframe/build/aframe-ar.js"></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>webpack starterkit</title>
</head>

<body style='margin : 0px; overflow: hidden;'>
  <a-scene embedded arjs='sourceType: webcam; detectionMode: mono_and_matrix; matrixCodeType: 3x3;'>
    <a-assets>
      <video preload="none" id="vid" class="vidh" loop="true" crossorigin webkit-playsinline playsinline controls>
        <source type="video/webm" src="../public/vids/5.webm">
        <h3>Error : Your browser does not support.</h3>
        <!-- FOR NOTMAL VIDEO YOU CAN USE MP4 or WEBM BUT FOR ALPHA VIDEO YOU NEED TO USE .WEBM FORMAT-->
      </video>
      <video preload="auto" id="vid2" class="vidh" loop="true" crossorigin webkit-playsinline playsinline controls>
        <source type="video/webm" src="../public/vids/5.webm">
        <h3>Error : Your browser does not support.</h3>
        <!-- FOR NOTMAL VIDEO YOU CAN USE MP4 or WEBM BUT FOR ALPHA VIDEO YOU NEED TO USE .WEBM FORMAT-->
      </video>
    </a-assets>
    <!-- handle marker with hiro preset -->
    <a-marker type='barcode' value='6'>
      <a-plane position='0 0.1 0' scale="2 2 2" rotation="-90 0 0" material='transparent:true;alphaTest:0;src:#vid2'></a-plane>
    </a-marker>

    <!-- handle barcode marker -->
    <a-marker type='barcode' value='5' vidhandler>
      <a-plane position='0 0.1 0' scale="2 2 2" rotation="-90 0 0" material='transparent:true;alphaTest:0;src:#vid'></a-plane>
    </a-marker>

    <!-- add a simple camera -->
    <a-entity camera></a-entity>
  </a-scene>

  <script>
    AFRAME.registerComponent('vidhandler', {
      init: function() {
        this.toggle = false;
        this.vid = document.querySelector("#vid");
        this.vid.pause();

      },
      tick: function() {
        if (this.el.object3D.visible == true) {
          if (!this.toggle) {
            this.toggle = true;
            this.vid.play();
          }
        } else {
          this.toggle = false;
          this.vid.pause();
        }
      }
    });

    function refrespage() {
      location.reload();
    }

    function playvid() {
      vid.play();
    }
  </script>
</body>

</html>